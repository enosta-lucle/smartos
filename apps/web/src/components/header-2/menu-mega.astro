---
import type { HeaderMenuItemLevel2 } from "$/types/strapi.type";

type Props = {
  items: HeaderMenuItemLevel2[];
};

const { items } = Astro.props;
---

<div
  class:list={[
    "mega-menu",
    "border pt-4",
    "absolute top-full left-0 hidden",
    "grid grid-cols-1 w-max",
    "has-[ul:first-of-type:hover]:grid-cols-2",
    "group-hover/menu:block",
  ]}
>
  <ul class:list={["w-68", "bg-white"]}>
    {
      items.map((item) => (
        <li id={`lv2-${item.id}`} class="p-2">
          {item.title}
        </li>
      ))
    }
  </ul>

  {
    items.map((item) => {
      if (!item.children?.length) return null;

      return (
        <ul id={`content-lv2-${item.id}`} class:list={["bg-white", "hidden w-68", "col-start-2 row-start-1"]}>
          {item.children?.map((lv3) => (
            <li class="p-2">{lv3.title}</li>
          ))}
        </ul>
      );
    })
  }
</div>
